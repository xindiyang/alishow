# 阿里百秀接口文档

# 1. 管理员登录及退出接口

## 1.1 管理员登录接口

 **功能描述**： 检测用户名和密码是否正确

 **请求URL地址**：  /api/login/checkLogin

 **请求方式**： post

 **请求参数**：

| 参数名 | 类型   | 必选 | 说明       |
| ------ | ------ | ---- | ---------- |
| email  | string | 是   | 登录用户名 |
| pwd    | string | 是   | 登录密码   |

 **返回参数说明**：

| 参数名  | 类型   | 说明                                                   |
| ------- | ------ | ------------------------------------------------------ |
| code    | int    | 状态码： 200，登录成功；201，用户名错误；202，密码错误 |
| message | string | 结果信息                                               |



用户名错误示例： {code:201, message:"用户名错误"}

密码错误示例： {code:202, message:"密码错误"}

登录成功示例： {code:200, message:"登录成功"}

登录成功，接口会将管理员的信息记录到session中

```js
//登录成功后，注册session
        req.session.isLogin = true;
        req.session.userInfo = result[0];
```





## 1.2 管理员退出接口

 **功能描述**：管理员退出登录状态

 **请求URL地址**： /api/login/logout

 **请求方式**：post

 **请求参数**： 无

 **返回参数说明**：

| 参数名  | 类型   | 说明                                    |
| ------- | ------ | --------------------------------------- |
| code    | int    | 状态码： 200，退出成功； 201， 退出失败 |
| message | string | 结果信息                                |



退出成功示例：{code:200, message:"退出成功"}

退出失败示例：{code:201, message:"退出失败"}



# 2.个人中心接口 

## 2.1 获取当前登录管理员信息

 **功能描述**： 根据当前登录的管理员id获取管理员信息

 **请求URL地址**：  /api/center/getAdminById

 **请求方式**： post

 **请求参数**： 无

 **返回参数说明**：

| 参数名  | 类型   | 说明                                                      |
| ------- | ------ | --------------------------------------------------------- |
| code    | int    | 状态码： 200，获取管理员信息成功；201，获取管理员信息失败 |
| message | string | 结果信息                                                  |
| data    | json   | 当前管理员信息                                            |



获取成功示例：

```js
{
    code:200, 
    message: "获取管理员信息成功", 
    data: {admin_id: 1, admin_email: "root@ali.com", admin_nickname: "大牛", ...}
}
```



获取失败示例： {code: 201, message: "获取管理员信息失败"}





## 2.2 Ajax文件上传

 **功能描述**： ajax文件上传

 **请求URL地址**：  /api/uploads

 **请求方式**： post

 **请求参数**： 

| 参数名 | 类型     | 必选 | 说明                                            |
| ------ | -------- | ---- | ----------------------------------------------- |
| avatar | FormData | 是   | 要上传的文件保存在FormData中。key值必须为avatar |

 **上传保存路径**：上传文件保存到了项目根目录中的upload文件夹，该文件夹需要自行创建



**返回参数说明**：

| 参数名  | 类型   | 说明                  |
| ------- | ------ | --------------------- |
| code    | int    | 状态码：200，上传成功 |
| message | string | 结果信息              |
| path    | string | 上传文件保存路径      |



返回示例: {code: 200, message: "上传成功", path: "\upload\avatar-1553173427439.jpg"}





## 2.3 更新管理员信息

 **功能描述**： 更新当前登录管理员信息

 **请求URL地址**：  /api/center/personal

 **请求方式**： post

 **请求参数**： 

| 参数名   | 类型   | 必选 | 说明               |
| -------- | ------ | ---- | ------------------ |
| email    | string | 否   | 管理员邮箱（账号） |
| nickname | string | 否   | 管理员昵称         |
| sign     | string | 否   | 管理员个人简介     |
| pic      | string | 否   | 管理员头像         |

 

**返回参数说明**：

| 参数名  | 类型   | 说明                                 |
| ------- | ------ | ------------------------------------ |
| code    | int    | 状态码：200，更新成功；201，更新失败 |
| message | string | 结果信息                             |



成功返回示例:  {code: 200, message: "更新个人信息成功"}

失败返回示例:  {code: 201, message: "更新个人信息失败"}



## 2.4 修改密码 

 **功能描述**： 更新当前登录管理员密码

 **请求URL地址**：  /api/center/passwd

 **请求方式**： post

 **请求参数**： 

| 参数名 | 类型   | 必选 | 说明   |
| ------ | ------ | ---- | ------ |
| oldpwd | string | 是   | 旧密码 |
| newpwd | string | 是   | 新密码 |

 

**返回参数说明**：

| 参数名  | 类型   | 说明                                                      |
| ------- | ------ | --------------------------------------------------------- |
| code    | int    | 状态码：200，更新成功；201，原密码错误；202，更新密码失败 |
| message | string | 结果信息                                                  |



成功返回示例:  {code:200, message:"更新密码成功"}

失败返回示例:  {code: 201, message: "原密码错误"}

			   {code:202, message:"更新密码失败"}







# 3. 文章管理接口

## 3.1 文章列表接口

 **功能描述**： 根据页号获取文章信息

 **请求URL地址**：  /api/post/page

 **请求方式**： post

 **请求参数**： 

| 参数名 | 类型 | 必选 | 说明 |
| ------ | ---- | ---- | ---- |
| pageno | int  | 是   | 页号 |

 

**返回参数说明**：

| 参数名  | 类型   | 说明                                                 |
| ------- | ------ | ---------------------------------------------------- |
| code    | int    | 状态码：200，获取文章列表成功；201，获取文章列表失败 |
| message | string | 结果信息                                             |
| data    | array  | 文章信息数组                                         |



成功返回示例:  

```js
{
    code:200, 
    message:"获取文章列表成功", 
    data:[
        {article_id:1, article_title:'捷豹路虎将在华国产纯电动车 竞争奔驰EQ系列', ...}, 
        {article_id:2, article_title:'新E级敞篷轿跑车上市 ', ...}
    ] 
}
```





失败返回示例:  {code: 201, message:"获取文章列表失败"}



## 3.2 获取总页数

 **功能描述**： 根据总页数

 **请求URL地址**：  /api/post/getPageTotal

 **请求方式**： get

 **请求参数**： 无

 

 **返回参数说明**：

| 参数名  | 类型   | 说明                                         |
| ------- | ------ | -------------------------------------------- |
| code    | int    | 状态码：200，获取总页数成功；201，获取总页数 |
| message | string | 结果信息                                     |
| data    | int    | 总页数                                       |



成功返回示例:  {code:200, message:"获取分页信息成功", data: 10}

失败返回示例:  {code: 201, message:"获取分页信息失败"}







## 3.3 添加新文章接口

 **功能描述**： 添加新文章

 **请求URL地址**：  /api/post/addpost

 **请求方式**： post

 **请求参数**： 

| 参数名   | 类型   | 必选 | 说明                    |
| -------- | ------ | ---- | ----------------------- |
| title    | string | 是   | 文章标题                |
| desc     | string | 是   | 文章摘要                |
| content  | string | 是   | 文章内容                |
| pic      | string | 否   | 文章封面图片            |
| category | int    | 是   | 所属栏目id              |
| status   | string | 是   | 文章状态： 已发布，草稿 |

 

**返回参数说明**：

| 参数名  | 类型   | 说明                                         |
| ------- | ------ | -------------------------------------------- |
| code    | int    | 状态码：200，添加文章成功；201，添加文章失败 |
| message | string | 结果信息                                     |



成功返回示例:  {code:200, message:"添加新文章成功"}

失败返回示例:  {code:201, message:"添加新文章失败"}



## 3.4 批量删除文章接口

 **功能描述**： 根据文章id批量删除文章

 **请求URL地址**：  /api/post/delposts

 **请求方式**： get

 **请求参数**： 

| 参数名 | 类型   | 必选 | 说明                                    |
| ------ | ------ | ---- | --------------------------------------- |
| ids    | string | 是   | 要删除的文章id组成的字符串，例如：1,2,3 |

 

**返回参数说明**：

| 参数名  | 类型   | 说明                                         |
| ------- | ------ | -------------------------------------------- |
| code    | int    | 状态码：200，删除文章成功；201，删除文章失败 |
| message | string | 结果信息                                     |



成功返回示例:  {code:200, message:"删除文章成功"}

失败返回示例:  {code: 201, message:"删除文章失败"}







# 4. 栏目管理接口

## 4.1 获取栏目信息

**功能描述**：管理员退出登录状态

**请求URL地址**： /api/cate/getCate

**请求方式**：post

**请求参数**： 无

**返回参数说明**：

| 参数名  | 类型   | 说明                                                  |
| ------- | ------ | ----------------------------------------------------- |
| code    | int    | 状态码： 200，获取栏目信息成功；201，获取栏目信息失败 |
| message | string | 结果信息                                              |
| data    | array  | 所有栏目数据                                          |





获取栏目信息成功示例：{code:200, message:"获取栏目信息成功", data: [{cate_id:1, cate_name:"潮科技"...}, {cate_id:2, cate_name:"奇趣事",...}, ...]}

获取栏目信息失败示例：{code:201, message:"获取栏目信息失败"}



# 5. 轮播图管理接口

## 5.1 获取轮播图列表接口

 **功能描述**： 根据页号获取文章信息

 **请求URL地址**： /api/other/slides

 **请求方式**： post

 **请求参数**： 无

 

 **返回参数说明**：

| 参数名  | 类型   | 说明                                                     |
| ------- | ------ | -------------------------------------------------------- |
| code    | int    | 状态码：200，获取轮播图列表成功；201，获取轮播图列表失败 |
| message | string | 结果信息                                                 |
| data    | array  | 文章信息数组                                             |



成功返回示例:  

```js
{
    code:200, 
    message:"获取轮播图数据成功", 
    data:[
        {pic_id:1, pic_url:"/upload/13412134123.jpg", ...}, 
        {pic_id:2, pic_url:"/upload/14323124213.jpg", ...},
        ...
    ] 
}
```



失败返回示例:  {code:201, message:"获取轮播图数据失败"}



## 5.2 添加新轮播图接口

**功能描述**： 添加新轮播图

 **请求URL地址**： /admin/other/addSildes

 **请求方式**： post

 **请求参数**： 

| 参数名       | 类型   | 必选 | 说明                 |
| ------------ | ------ | ---- | -------------------- |
| image_hidden | string | 是   | 轮播图片保存路径     |
| text         | string | 是   | 轮播图文字           |
| link         | string | 是   | 轮播图对应的文章路径 |

 

 **返回参数说明**：

| 参数名  | 类型   | 说明                                             |
| ------- | ------ | ------------------------------------------------ |
| code    | int    | 状态码：200，添加轮播图成功；201，添加轮播图失败 |
| message | string | 结果信息                                         |
| data    | json   | 添加的轮播图数据                                 |



成功返回示例:  

```js
{
    code:200, 
    message:"获取轮播图数据成功", 
    data: {pic_url:"/upload/13412134123.jpg", pic_text:"Hello", pic_link:"..."}
}
```



失败返回示例:  {code:201, message:"获取轮播图数据失败"}

